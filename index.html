<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>데일리 루틴 트래커</title>
    <meta name="description" content="매일의 루틴을 기록하고 GitHub 잔디밭 스타일로 시각화하는 트래커">

    <!-- Pretendard Font -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">🌅 데일리 루틴</h1>
                <div class="header-actions">
                    <button class="sync-btn" id="syncBtn" title="동기화">
                        <span class="sync-icon">🔄</span>
                        <span class="sync-status" id="syncStatus"></span>
                    </button>
                    <div class="date-nav">
                        <button class="nav-btn" id="prevDay">‹</button>
                        <span class="current-date" id="currentDate"></span>
                        <button class="nav-btn" id="nextDay">›</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Today's Routines Section -->
            <section class="glass-card routine-section">
                <div class="section-header">
                    <h2>오늘의 루틴</h2>
                    <button class="add-btn" id="addRoutineBtn">+ 추가</button>
                </div>

                <div class="routine-list" id="routineList">
                    <!-- Routines will be rendered here -->
                </div>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-label">
                        <span>오늘 완성도</span>
                        <span class="progress-percent" id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </section>

            <!-- Heatmap Section -->
            <section class="glass-card heatmap-section">
                <div class="section-header">
                    <h2>📊 연간 기록</h2>
                    <div class="heatmap-legend">
                        <span>낮음</span>
                        <div class="legend-boxes">
                            <div class="legend-box level-0"></div>
                            <div class="legend-box level-1"></div>
                            <div class="legend-box level-2"></div>
                            <div class="legend-box level-3"></div>
                            <div class="legend-box level-4"></div>
                        </div>
                        <span>높음</span>
                    </div>
                </div>
                <div class="heatmap-container">
                    <div class="heatmap-months" id="heatmapMonths"></div>
                    <div class="heatmap-wrapper">
                        <div class="heatmap-days">
                            <span>월</span>
                            <span>수</span>
                            <span>금</span>
                        </div>
                        <div class="heatmap-grid" id="heatmapGrid"></div>
                    </div>
                </div>
            </section>

            <!-- Google Calendar Section -->
            <section class="glass-card calendar-section">
                <div class="section-header">
                    <h2>📅 구글 캘린더</h2>
                    <button class="settings-btn" id="calendarSettingsBtn">⚙️ 설정</button>
                </div>
                <div class="calendar-container" id="calendarContainer">
                    <div class="calendar-placeholder" id="calendarPlaceholder">
                        <p>구글 캘린더를 연동하려면 설정 버튼을 클릭하세요</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Add Routine Modal -->
        <div class="modal-overlay" id="addRoutineModal">
            <div class="modal glass-card">
                <h3>새 루틴 추가</h3>
                <input type="text" id="routineInput" placeholder="루틴 이름을 입력하세요" maxlength="50">
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelAddRoutine">취소</button>
                    <button class="btn btn-primary" id="confirmAddRoutine">추가</button>
                </div>
            </div>
        </div>

        <!-- Calendar Settings Modal -->
        <div class="modal-overlay" id="calendarSettingsModal">
            <div class="modal glass-card">
                <h3>구글 캘린더 설정</h3>
                <p class="modal-description">공개 캘린더 URL 또는 임베드 ID를 입력하세요</p>
                <input type="text" id="calendarIdInput" placeholder="example@group.calendar.google.com">
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelCalendarSettings">취소</button>
                    <button class="btn btn-primary" id="saveCalendarSettings">저장</button>
                </div>
            </div>
        </div>

        <!-- Edit Routine Modal -->
        <div class="modal-overlay" id="editRoutineModal">
            <div class="modal glass-card">
                <h3>루틴 수정</h3>
                <input type="text" id="editRoutineInput" placeholder="루틴 이름을 입력하세요" maxlength="50">
                <div class="modal-actions">
                    <button class="btn btn-danger" id="deleteRoutine">삭제</button>
                    <button class="btn btn-secondary" id="cancelEditRoutine">취소</button>
                    <button class="btn btn-primary" id="saveEditRoutine">저장</button>
                </div>
            </div>
        </div>

        <!-- Sync Settings Modal -->
        <div class="modal-overlay" id="syncSettingsModal">
            <div class="modal glass-card">
                <h3>🔄 Google Sheets 연동</h3>
                <p class="modal-description">
                    데이터를 여러 기기에서 동기화하려면 Google Apps Script URL을 입력하세요.
                    <a href="#" id="syncHelpLink" style="color: var(--accent-primary);">(설정 방법)</a>
                </p>
                <input type="text" id="scriptUrlInput" placeholder="https://script.google.com/macros/s/...">
                <div class="sync-info" id="syncInfo"></div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelSyncSettings">취소</button>
                    <button class="btn btn-primary" id="saveSyncSettings">저장</button>
                </div>
            </div>
        </div>

        <!-- Sync Help Modal -->
        <div class="modal-overlay" id="syncHelpModal">
            <div class="modal glass-card modal-lg">
                <h3>📖 Google Sheets 연동 방법</h3>
                <div class="help-content">
                    <ol>
                        <li><strong>Google Sheets</strong> 새 문서 생성</li>
                        <li><strong>확장 프로그램 → Apps Script</strong> 열기</li>
                        <li><code>google-apps-script.js</code> 파일 내용 복사 및 붙여넣기</li>
                        <li>상단 <strong>setupSheets</strong> 함수 실행 (초기화)</li>
                        <li><strong>배포 → 새 배포 → 웹 앱</strong> 선택</li>
                        <li>액세스 권한: <strong>"모든 사용자"</strong> 선택</li>
                        <li>배포 후 URL 복사하여 위 설정에 입력</li>
                    </ol>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="closeSyncHelp">확인</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>